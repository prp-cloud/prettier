(function(n){function e(){var i=n();return i.default||i}if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var t=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof self<"u"?self:this||{};t.prettierPlugins=t.prettierPlugins||{},t.prettierPlugins.angular=e()}})(function(){"use strict";var Ue=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var Zt=Object.getOwnPropertyNames;var Jt=Object.prototype.hasOwnProperty;var at=r=>{throw TypeError(r)};var ot=(r,e)=>{for(var t in e)Ue(r,t,{get:e[t],enumerable:!0})},Xt=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zt(e))!Jt.call(r,i)&&i!==t&&Ue(r,i,{get:()=>e[i],enumerable:!(s=Yt(e,i))||s.enumerable});return r};var es=r=>Xt(Ue({},"__esModule",{value:!0}),r);var Fe=(r,e,t)=>e.has(r)||at("Cannot "+t);var O=(r,e,t)=>(Fe(r,e,"read from private field"),t?t.call(r):e.get(r)),P=(r,e,t)=>e.has(r)?at("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Y=(r,e,t,s)=>(Fe(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),c=(r,e,t)=>(Fe(r,e,"access private method"),t);var tr={};ot(tr,{parsers:()=>nt});var nt={};ot(nt,{__ng_action:()=>Zs,__ng_binding:()=>Js,__ng_directive:()=>er,__ng_interpolation:()=>Xs});var Z=class{constructor(e,t,s,i){this.input=t,this.errLocation=s,this.ctxLocation=i,this.message=`Parser Error: ${e} ${s} [${t}] in ${i}`}},b=class{constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new L(e+this.start,e+this.end)}},m=class{constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}},J=class extends m{constructor(e,t,s){super(e,t),this.nameSpan=s}},$=class extends m{visit(e,t=null){}},B=class extends m{visit(e,t=null){return e.visitImplicitReceiver(this,t)}},Le=class extends B{visit(e,t=null){var s;return(s=e.visitThisReceiver)==null?void 0:s.call(e,this,t)}},X=class extends m{constructor(e,t,s){super(e,t),this.expressions=s}visit(e,t=null){return e.visitChain(this,t)}},ee=class extends m{constructor(e,t,s,i,n){super(e,t),this.condition=s,this.trueExp=i,this.falseExp=n}visit(e,t=null){return e.visitConditional(this,t)}},M=class extends J{constructor(e,t,s,i,n){super(e,t,s),this.receiver=i,this.name=n}visit(e,t=null){return e.visitPropertyRead(this,t)}},te=class extends J{constructor(e,t,s,i,n,a){super(e,t,s),this.receiver=i,this.name=n,this.value=a}visit(e,t=null){return e.visitPropertyWrite(this,t)}},_=class extends J{constructor(e,t,s,i,n){super(e,t,s),this.receiver=i,this.name=n}visit(e,t=null){return e.visitSafePropertyRead(this,t)}},se=class extends m{constructor(e,t,s,i){super(e,t),this.receiver=s,this.key=i}visit(e,t=null){return e.visitKeyedRead(this,t)}},U=class extends m{constructor(e,t,s,i){super(e,t),this.receiver=s,this.key=i}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}},re=class extends m{constructor(e,t,s,i,n){super(e,t),this.receiver=s,this.key=i,this.value=n}visit(e,t=null){return e.visitKeyedWrite(this,t)}},ie=class extends J{constructor(e,t,s,i,n,a){super(e,t,a),this.exp=s,this.name=i,this.args=n}visit(e,t=null){return e.visitPipe(this,t)}},E=class extends m{constructor(e,t,s){super(e,t),this.value=s}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}},ne=class extends m{constructor(e,t,s){super(e,t),this.expressions=s}visit(e,t=null){return e.visitLiteralArray(this,t)}},ae=class extends m{constructor(e,t,s,i){super(e,t),this.keys=s,this.values=i}visit(e,t=null){return e.visitLiteralMap(this,t)}},oe=class extends m{constructor(e,t,s,i){super(e,t),this.strings=s,this.expressions=i}visit(e,t=null){return e.visitInterpolation(this,t)}},A=class extends m{constructor(e,t,s,i,n){super(e,t),this.operation=s,this.left=i,this.right=n}visit(e,t=null){return e.visitBinary(this,t)}},F=class r extends A{static createMinus(e,t,s){return new r(e,t,"-",s,"-",new E(e,t,0),s)}static createPlus(e,t,s){return new r(e,t,"+",s,"-",s,new E(e,t,0))}constructor(e,t,s,i,n,a,o){super(e,t,n,a,o),this.operator=s,this.expr=i,this.left=null,this.right=null,this.operation=null}visit(e,t=null){return e.visitUnary!==void 0?e.visitUnary(this,t):e.visitBinary(this,t)}},ce=class extends m{constructor(e,t,s){super(e,t),this.expression=s}visit(e,t=null){return e.visitPrefixNot(this,t)}},he=class extends m{constructor(e,t,s){super(e,t),this.expression=s}visit(e,t=null){return e.visitNonNullAssert(this,t)}},pe=class extends m{constructor(e,t,s,i,n){super(e,t),this.receiver=s,this.args=i,this.argumentSpan=n}visit(e,t=null){return e.visitCall(this,t)}},D=class extends m{constructor(e,t,s,i,n){super(e,t),this.receiver=s,this.args=i,this.argumentSpan=n}visit(e,t=null){return e.visitSafeCall(this,t)}},L=class{constructor(e,t){this.start=e,this.end=t}},R=class extends m{constructor(e,t,s,i,n){super(new b(0,t===null?0:t.length),new L(i,t===null?i:i+t.length)),this.ast=e,this.source=t,this.location=s,this.errors=n}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}},G=class{constructor(e,t,s){this.sourceSpan=e,this.key=t,this.value=s}},ue=class{constructor(e,t,s){this.sourceSpan=e,this.key=t,this.value=s}},Re=class{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitKeyedWrite(e,t){this.visit(e.receiver,t),this.visit(e.key,t),this.visit(e.value,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitPropertyWrite(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitAll(e,t){for(let s of e)this.visit(s,t)}};var ct;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.LITERAL_ATTR=1]="LITERAL_ATTR",r[r.ANIMATION=2]="ANIMATION",r[r.TWO_WAY=3]="TWO_WAY"})(ct||(ct={}));function ht(r){return r>=9&&r<=32||r==160}function T(r){return 48<=r&&r<=57}function pt(r){return r>=97&&r<=122||r>=65&&r<=90}function De(r){return r===39||r===34||r===96}var l;(function(r){r[r.Character=0]="Character",r[r.Identifier=1]="Identifier",r[r.PrivateIdentifier=2]="PrivateIdentifier",r[r.Keyword=3]="Keyword",r[r.String=4]="String",r[r.Operator=5]="Operator",r[r.Number=6]="Number",r[r.Error=7]="Error"})(l||(l={}));var Ls=["var","let","as","null","undefined","true","false","if","else","this"],ye=class{tokenize(e){let t=new Ve(e),s=[],i=t.scanToken();for(;i!=null;)s.push(i),i=t.scanToken();return s}},I=class{constructor(e,t,s,i,n){this.index=e,this.end=t,this.type=s,this.numValue=i,this.strValue=n}isCharacter(e){return this.type==l.Character&&this.numValue==e}isNumber(){return this.type==l.Number}isString(){return this.type==l.String}isOperator(e){return this.type==l.Operator&&this.strValue==e}isIdentifier(){return this.type==l.Identifier}isPrivateIdentifier(){return this.type==l.PrivateIdentifier}isKeyword(){return this.type==l.Keyword}isKeywordLet(){return this.type==l.Keyword&&this.strValue=="let"}isKeywordAs(){return this.type==l.Keyword&&this.strValue=="as"}isKeywordNull(){return this.type==l.Keyword&&this.strValue=="null"}isKeywordUndefined(){return this.type==l.Keyword&&this.strValue=="undefined"}isKeywordTrue(){return this.type==l.Keyword&&this.strValue=="true"}isKeywordFalse(){return this.type==l.Keyword&&this.strValue=="false"}isKeywordThis(){return this.type==l.Keyword&&this.strValue=="this"}isError(){return this.type==l.Error}toNumber(){return this.type==l.Number?this.numValue:-1}toString(){switch(this.type){case l.Character:case l.Identifier:case l.Keyword:case l.Operator:case l.PrivateIdentifier:case l.String:case l.Error:return this.strValue;case l.Number:return this.numValue.toString();default:return null}}};function ft(r,e,t){return new I(r,e,l.Character,t,String.fromCharCode(t))}function Rs(r,e,t){return new I(r,e,l.Identifier,0,t)}function Ps(r,e,t){return new I(r,e,l.PrivateIdentifier,0,t)}function bs(r,e,t){return new I(r,e,l.Keyword,0,t)}function We(r,e,t){return new I(r,e,l.Operator,0,t)}function Bs(r,e,t){return new I(r,e,l.String,0,t)}function Ts(r,e,t){return new I(r,e,l.Number,t,"")}function Ks(r,e,t){return new I(r,e,l.Error,0,t)}var Te=new I(-1,-1,l.Character,0,""),Ve=class{constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,t=this.length,s=this.peek,i=this.index;for(;s<=32;)if(++i>=t){s=0;break}else s=e.charCodeAt(i);if(this.peek=s,this.index=i,i>=t)return null;if(vt(s))return this.scanIdentifier();if(T(s))return this.scanNumber(i);let n=i;switch(s){case 46:return this.advance(),T(this.peek)?this.scanNumber(n):ft(n,this.index,46);case 40:case 41:case 123:case 125:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(n,s);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(n,String.fromCharCode(s));case 63:return this.scanQuestion(n);case 60:case 62:return this.scanComplexOperator(n,String.fromCharCode(s),61,"=");case 33:case 61:return this.scanComplexOperator(n,String.fromCharCode(s),61,"=",61,"=");case 38:return this.scanComplexOperator(n,"&",38,"&");case 124:return this.scanComplexOperator(n,"|",124,"|");case 160:for(;ht(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(s)}]`,0)}scanCharacter(e,t){return this.advance(),ft(e,this.index,t)}scanOperator(e,t){return this.advance(),We(e,this.index,t)}scanComplexOperator(e,t,s,i,n,a){this.advance();let o=t;return this.peek==s&&(this.advance(),o+=i),n!=null&&this.peek==n&&(this.advance(),o+=a),We(e,this.index,o)}scanIdentifier(){let e=this.index;for(this.advance();gt(this.peek);)this.advance();let t=this.input.substring(e,this.index);return Ls.indexOf(t)>-1?bs(e,this.index,t):Rs(e,this.index,t)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!vt(this.peek))return this.error("Invalid character [#]",-1);for(;gt(this.peek);)this.advance();let t=this.input.substring(e,this.index);return Ps(e,this.index,t)}scanNumber(e){let t=this.index===e,s=!1;for(this.advance();;){if(!T(this.peek))if(this.peek===95){if(!T(this.input.charCodeAt(this.index-1))||!T(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);s=!0}else if(this.peek===46)t=!1;else if(Ms(this.peek)){if(this.advance(),_s(this.peek)&&this.advance(),!T(this.peek))return this.error("Invalid exponent",-1);t=!1}else break;this.advance()}let i=this.input.substring(e,this.index);s&&(i=i.replace(/_/g,""));let n=t?Fs(i):parseFloat(i);return Ts(e,this.index,n)}scanString(){let e=this.index,t=this.peek;this.advance();let s="",i=this.index,n=this.input;for(;this.peek!=t;)if(this.peek==92){s+=n.substring(i,this.index);let o;if(this.advance(),this.peek==117){let p=n.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(p))o=parseInt(p,16);else return this.error(`Invalid unicode escape [\\u${p}]`,0);for(let u=0;u<5;u++)this.advance()}else o=Us(this.peek),this.advance();s+=String.fromCharCode(o),i=this.index}else{if(this.peek==0)return this.error("Unterminated quote",0);this.advance()}let a=n.substring(i,this.index);return this.advance(),Bs(e,this.index,s+a)}scanQuestion(e){this.advance();let t="?";return(this.peek===63||this.peek===46)&&(t+=this.peek===46?".":"?",this.advance()),We(e,this.index,t)}error(e,t){let s=this.index+t;return Ks(s,this.index,`Lexer Error: ${e} at column ${s} in expression [${this.input}]`)}};function vt(r){return 97<=r&&r<=122||65<=r&&r<=90||r==95||r==36}function gt(r){return pt(r)||T(r)||r==95||r==36}function Ms(r){return r==101||r==69}function _s(r){return r==45||r==43}function Us(r){switch(r){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return r}}function Fs(r){let e=parseInt(r);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+r);return e}var Ds=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function yt(r,e){if(e!=null&&!(Array.isArray(e)&&e.length==2))throw new Error(`Expected '${r}' to be an array, [start, end].`);if(e!=null){let t=e[0],s=e[1];Ds.forEach(i=>{if(i.test(t)||i.test(s))throw new Error(`['${t}', '${s}'] contains unusable interpolation symbol.`)})}}var ze=class r{static fromArray(e){return e?(yt("interpolation",e),new r(e[0],e[1])):Q}constructor(e,t){this.start=e,this.end=t}},Q=new ze("{{","}}");var qe=class{constructor(e,t,s){this.strings=e,this.expressions=t,this.offsets=s}},He=class{constructor(e,t,s){this.templateBindings=e,this.warnings=t,this.errors=s}},me=class{constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,s,i=Q){this._checkNoInterpolation(e,t,i);let n=this._stripComments(e),a=this._lexer.tokenize(n),o=new z(e,t,s,a,1,this.errors,0).parseChain();return new R(o,e,t,s,this.errors)}parseBinding(e,t,s,i=Q){let n=this._parseBindingAst(e,t,s,i);return new R(n,e,t,s,this.errors)}checkSimpleExpression(e){let t=new je;return e.visit(t),t.errors}parseSimpleBinding(e,t,s,i=Q){let n=this._parseBindingAst(e,t,s,i),a=this.checkSimpleExpression(n);return a.length>0&&this._reportError(`Host binding expression cannot contain ${a.join(" ")}`,e,t),new R(n,e,t,s,this.errors)}_reportError(e,t,s,i){this.errors.push(new Z(e,t,s,i))}_parseBindingAst(e,t,s,i){this._checkNoInterpolation(e,t,i);let n=this._stripComments(e),a=this._lexer.tokenize(n);return new z(e,t,s,a,0,this.errors,0).parseChain()}parseTemplateBindings(e,t,s,i,n){let a=this._lexer.tokenize(t);return new z(t,s,n,a,0,this.errors,0).parseTemplateBindings({source:e,span:new L(i,i+e.length)})}parseInterpolation(e,t,s,i,n=Q){let{strings:a,expressions:o,offsets:p}=this.splitInterpolation(e,t,i,n);if(o.length===0)return null;let u=[];for(let d=0;d<o.length;++d){let S=o[d].text,g=this._stripComments(S),y=this._lexer.tokenize(g),w=new z(e,t,s,y,0,this.errors,p[d]).parseChain();u.push(w)}return this.createInterpolationAst(a.map(d=>d.text),u,e,t,s)}parseInterpolationExpression(e,t,s){let i=this._stripComments(e),n=this._lexer.tokenize(i),a=new z(e,t,s,n,0,this.errors,0).parseChain(),o=["",""];return this.createInterpolationAst(o,[a],e,t,s)}createInterpolationAst(e,t,s,i,n){let a=new b(0,s.length),o=new oe(a,a.toAbsolute(n),e,t);return new R(o,s,i,n,this.errors)}splitInterpolation(e,t,s,i=Q){let n=[],a=[],o=[],p=s?Gs(s):null,u=0,d=!1,S=!1,{start:g,end:y}=i;for(;u<e.length;)if(d){let w=u,H=w+g.length,j=this._getInterpolationEndIndex(e,y,H);if(j===-1){d=!1,S=!0;break}let K=j+y.length,Ne=e.substring(H,j);Ne.trim().length===0&&this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${u} in`,t),a.push({text:Ne,start:w,end:K});let jt=((p==null?void 0:p.get(w))??w)+g.length;o.push(jt),u=K,d=!1}else{let w=u;u=e.indexOf(g,u),u===-1&&(u=e.length);let H=e.substring(w,u);n.push({text:H,start:w,end:u}),d=!0}if(!d)if(S){let w=n[n.length-1];w.text+=e.substring(u),w.end=e.length}else n.push({text:e.substring(u),start:u,end:e.length});return new qe(n,a,o)}wrapLiteralPrimitive(e,t,s){let i=new b(0,e==null?0:e.length);return new R(new E(i,i.toAbsolute(s),e),e,t,s,this.errors)}_stripComments(e){let t=this._commentStart(e);return t!=null?e.substring(0,t):e}_commentStart(e){let t=null;for(let s=0;s<e.length-1;s++){let i=e.charCodeAt(s),n=e.charCodeAt(s+1);if(i===47&&n==47&&t==null)return s;t===i?t=null:t==null&&De(i)&&(t=i)}return null}_checkNoInterpolation(e,t,{start:s,end:i}){let n=-1,a=-1;for(let o of this._forEachUnquotedChar(e,0))if(n===-1)e.startsWith(s)&&(n=o);else if(a=this._getInterpolationEndIndex(e,i,o),a>-1)break;n>-1&&a>-1&&this._reportError(`Got interpolation (${s}${i}) where expression was expected`,e,`at column ${n} in`,t)}_getInterpolationEndIndex(e,t,s){for(let i of this._forEachUnquotedChar(e,s)){if(e.startsWith(t,i))return i;if(e.startsWith("//",i))return e.indexOf(t,i)}return-1}*_forEachUnquotedChar(e,t){let s=null,i=0;for(let n=t;n<e.length;n++){let a=e[n];De(e.charCodeAt(n))&&(s===null||s===a)&&i%2===0?s=s===null?a:null:s===null&&(yield n),i=a==="\\"?i+1:0}}},ge;(function(r){r[r.None=0]="None",r[r.Writable=1]="Writable"})(ge||(ge={}));var z=class{constructor(e,t,s,i,n,a,o){this.input=e,this.location=t,this.absoluteOffset=s,this.tokens=i,this.parseFlags=n,this.errors=a,this.offset=o,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=ge.None,this.sourceSpanCache=new Map,this.index=0}peek(e){let t=this.index+e;return t<this.tokens.length?this.tokens[t]:Te}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let s=this.currentEndIndex;if(t!==void 0&&t>this.currentEndIndex&&(s=t),e>s){let i=s;s=e,e=i}return new b(e,s)}sourceSpan(e,t){let s=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(s)||this.sourceSpanCache.set(s,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(s)}advance(){this.index++}withContext(e,t){this.context|=e;let s=t();return this.context^=e,s}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===Te?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){let s=this.parsePipe();if(e.push(s),this.consumeOptionalCharacter(59))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){let i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(e.length===0){let s=this.offset,i=this.offset+this.input.length;return new $(this.span(s,i),this.sourceSpan(s,i))}return e.length==1?e[0]:new X(this.span(t),this.sourceSpan(t),e)}parsePipe(){let e=this.inputIndex,t=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let s=this.inputIndex,i=this.expectIdentifierOrKeyword(),n,a;i!==null?n=this.sourceSpan(s):(i="",a=this.next.index!==-1?this.next.index:this.input.length+this.offset,n=new b(a,a).toAbsolute(this.absoluteOffset));let o=[];for(;this.consumeOptionalCharacter(58);)o.push(this.parseExpression());t=new ie(this.span(e),this.sourceSpan(e,a),t,i,o,n)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let s=this.parsePipe(),i;if(this.consumeOptionalCharacter(58))i=this.parsePipe();else{let n=this.inputIndex,a=this.input.substring(e,n);this.error(`Conditional expression ${a} requires all 3 expressions`),i=new $(this.span(e),this.sourceSpan(e))}return new ee(this.span(e),this.sourceSpan(e),t,s,i)}else return t}parseLogicalOr(){let e=this.inputIndex,t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let s=this.parseLogicalAnd();t=new A(this.span(e),this.sourceSpan(e),"||",t,s)}return t}parseLogicalAnd(){let e=this.inputIndex,t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let s=this.parseNullishCoalescing();t=new A(this.span(e),this.sourceSpan(e),"&&",t,s)}return t}parseNullishCoalescing(){let e=this.inputIndex,t=this.parseEquality();for(;this.consumeOptionalOperator("??");){let s=this.parseEquality();t=new A(this.span(e),this.sourceSpan(e),"??",t,s)}return t}parseEquality(){let e=this.inputIndex,t=this.parseRelational();for(;this.next.type==l.Operator;){let s=this.next.strValue;switch(s){case"==":case"===":case"!=":case"!==":this.advance();let i=this.parseRelational();t=new A(this.span(e),this.sourceSpan(e),s,t,i);continue}break}return t}parseRelational(){let e=this.inputIndex,t=this.parseAdditive();for(;this.next.type==l.Operator;){let s=this.next.strValue;switch(s){case"<":case">":case"<=":case">=":this.advance();let i=this.parseAdditive();t=new A(this.span(e),this.sourceSpan(e),s,t,i);continue}break}return t}parseAdditive(){let e=this.inputIndex,t=this.parseMultiplicative();for(;this.next.type==l.Operator;){let s=this.next.strValue;switch(s){case"+":case"-":this.advance();let i=this.parseMultiplicative();t=new A(this.span(e),this.sourceSpan(e),s,t,i);continue}break}return t}parseMultiplicative(){let e=this.inputIndex,t=this.parsePrefix();for(;this.next.type==l.Operator;){let s=this.next.strValue;switch(s){case"*":case"%":case"/":this.advance();let i=this.parsePrefix();t=new A(this.span(e),this.sourceSpan(e),s,t,i);continue}break}return t}parsePrefix(){if(this.next.type==l.Operator){let e=this.inputIndex,t=this.next.strValue,s;switch(t){case"+":return this.advance(),s=this.parsePrefix(),F.createPlus(this.span(e),this.sourceSpan(e),s);case"-":return this.advance(),s=this.parsePrefix(),F.createMinus(this.span(e),this.sourceSpan(e),s);case"!":return this.advance(),s=this.parsePrefix(),new ce(this.span(e),this.sourceSpan(e),s)}}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(40)?t=this.parseCall(t,e,!0):t=this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(91))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(40))t=this.parseCall(t,e,!1);else if(this.consumeOptionalOperator("!"))t=new he(this.span(e),this.sourceSpan(e),t);else return t}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;let t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),t}else{if(this.next.isKeywordNull())return this.advance(),new E(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new E(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new E(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new E(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new Le(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;let t=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new ne(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isCharacter(123))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new B(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let t=this.next.toNumber();return this.advance(),new E(this.span(e),this.sourceSpan(e),t)}else if(this.next.isString()){let t=this.next.toString();return this.advance(),new E(this.span(e),this.sourceSpan(e),t)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new $(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new $(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new $(this.span(e),this.sourceSpan(e)))}}}parseExpressionList(e){let t=[];do if(!this.next.isCharacter(e))t.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(44));return t}parseLiteralMap(){let e=[],t=[],s=this.inputIndex;if(this.expectCharacter(123),!this.consumeOptionalCharacter(125)){this.rbracesExpected++;do{let i=this.inputIndex,n=this.next.isString(),a=this.expectIdentifierOrKeywordOrString();if(e.push({key:a,quoted:n}),n)this.expectCharacter(58),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))t.push(this.parsePipe());else{let o=this.span(i),p=this.sourceSpan(i);t.push(new M(o,p,p,new B(o,p),a))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(125));this.rbracesExpected--,this.expectCharacter(125)}return new ae(this.span(s),this.sourceSpan(s),e,t)}parseAccessMember(e,t,s){let i=this.inputIndex,n=this.withContext(ge.Writable,()=>{let p=this.expectIdentifierOrKeyword()??"";return p.length===0&&this.error("Expected identifier for property access",e.span.end),p}),a=this.sourceSpan(i),o;if(s)this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),o=new $(this.span(t),this.sourceSpan(t))):o=new _(this.span(t),this.sourceSpan(t),a,e,n);else if(this.consumeOptionalOperator("=")){if(!(this.parseFlags&1))return this.error("Bindings cannot contain assignments"),new $(this.span(t),this.sourceSpan(t));let p=this.parseConditional();o=new te(this.span(t),this.sourceSpan(t),a,e,n,p)}else o=new M(this.span(t),this.sourceSpan(t),a,e,n);return o}parseCall(e,t,s){let i=this.inputIndex;this.rparensExpected++;let n=this.parseCallArguments(),a=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;let o=this.span(t),p=this.sourceSpan(t);return s?new D(o,p,e,n,a):new pe(o,p,e,n,a)}parseCallArguments(){if(this.next.isCharacter(41))return[];let e=[];do e.push(this.parsePipe());while(this.consumeOptionalCharacter(44));return e}expectTemplateBindingKey(){let e="",t=!1,s=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-");while(t);return{source:e,span:new L(s,s+e.length)}}parseTemplateBindings(e){let t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let s=this.parseLetBinding();if(s)t.push(s);else{let i=this.expectTemplateBindingKey(),n=this.parseAsBinding(i);n?t.push(n):(i.source=e.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new He(t,[],this.errors)}parseKeyedReadOrWrite(e,t,s){return this.withContext(ge.Writable,()=>{this.rbracketsExpected++;let i=this.parsePipe();if(i instanceof $&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),this.consumeOptionalOperator("="))if(s)this.error("The '?.' operator cannot be used in the assignment");else{let n=this.parseConditional();return new re(this.span(t),this.sourceSpan(t),e,i,n)}else return s?new U(this.span(t),this.sourceSpan(t),e,i):new se(this.span(t),this.sourceSpan(t),e,i);return new $(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){let t=[];this.consumeOptionalCharacter(58);let s=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,n=this.parseAsBinding(e);n||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);let a=new L(e.span.start,i);return t.push(new ue(a,e,s)),n&&t.push(n),t}getDirectiveBoundTarget(){if(this.next===Te||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:t,end:s}=e.span,i=this.input.substring(t,s);return new R(e,i,this.location,this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let t=this.expectTemplateBindingKey();this.consumeStatementTerminator();let s=new L(e.span.start,this.currentAbsoluteOffset);return new G(s,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let t=this.expectTemplateBindingKey(),s=null;this.consumeOptionalOperator("=")&&(s=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let i=new L(e,this.currentAbsoluteOffset);return new G(i,t,s)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(e,t=null){this.errors.push(new Z(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return e==null&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let s=`Private identifiers are not supported. Unexpected private identifier: ${e}`;t!==null&&(s+=`, ${t}`),this.error(s)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(59)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(41))&&(this.rbracesExpected<=0||!e.isCharacter(125))&&(this.rbracketsExpected<=0||!e.isCharacter(93))&&(!(this.context&ge.Writable)||!e.isOperator("="));)this.next.isError()&&this.errors.push(new Z(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}},je=class extends Re{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}};function Gs(r){let e=new Map,t=0,s=0,i=0;for(;i<r.length;){let n=r[i];if(n.type===9){let[a,o]=n.parts;t+=o.length,s+=a.length}else{let a=n.parts.reduce((o,p)=>o+p.length,0);s+=a,t+=a}e.set(s,t),i++}return e}function $t({start:r,end:e},t){let s=r,i=e;for(;i!==s&&/\s/.test(t[i-1]);)i--;for(;s!==i&&/\s/.test(t[s]);)s++;return{start:s,end:i}}function Vs({start:r,end:e},t){let s=r,i=e;for(;i!==t.length&&/\s/.test(t[i]);)i++;for(;s!==0&&/\s/.test(t[s-1]);)s--;return{start:s,end:i}}function Qs(r,e){return e[r.start-1]==="("&&e[r.end]===")"?{start:r.start-1,end:r.end+1}:r}function Et(r,e,t){let s=0,i={start:r.start,end:r.end};for(;;){let n=Vs(i,e),a=Qs(n,e);if(n.start===a.start&&n.end===a.end)break;i.start=a.start,i.end=a.end,s++}return{hasParens:(t?s-1:s)!==0,outerSpan:$t(t?{start:i.start+1,end:i.end-1}:i,e),innerSpan:$t(r,e)}}function Ct(r){return typeof r=="string"?e=>e===r:e=>r.test(e)}function At(r,e,t){let s=Ct(e);for(let i=t;i>=0;i--){let n=r[i];if(s(n))return i}throw new Error(`Cannot find front char ${e} from index ${t} in ${JSON.stringify(r)}`)}function Ot(r,e,t){let s=Ct(e);for(let i=t;i<r.length;i++){let n=r[i];if(s(n))return i}throw new Error(`Cannot find character ${e} from index ${t} in ${JSON.stringify(r)}`)}function It(r){return r.slice(0,1).toLowerCase()+r.slice(1)}function Ce(r){let{start:e,end:t}=r;return{start:e,end:t,range:[e,t]}}var zs=r=>me.prototype._commentStart(r);function qs(r,e){let t=e?zs(r):null;if(t===null)return{text:r,comments:[]};let s={type:"CommentLine",value:r.slice(t+2),...Ce({start:t,end:r.length})};return{text:r.slice(0,t),comments:[s]}}function Ae(r,e=!0){return t=>{let s=new ye,i=new me(s),{text:n,comments:a}=qs(t,e),o=r(n,i);if(o.errors.length!==0){let[{message:p}]=o.errors;throw new SyntaxError(p.replace(/^Parser Error: | at column \d+ in [^]*$/g,""))}return{result:o,comments:a,text:n}}}var kt=Ae((r,e)=>e.parseBinding(r,"",0)),Hs=Ae((r,e)=>e.parseSimpleBinding(r,"",0)),Nt=Ae((r,e)=>e.parseAction(r,"",0)),Lt=Ae((r,e)=>e.parseInterpolationExpression(r,"",0)),Rt=Ae((r,e)=>e.parseTemplateBindings("",r,"",0,0),!1);var Ys=(r,e,t)=>{if(!(r&&e==null))return Array.isArray(e)||typeof e=="string"?e[t<0?e.length+t:t]:e.at(t)},Ke=Ys;var Ye=class{text;constructor(e){this.text=e}getCharacterIndex(e,t){return Ot(this.text,e,t)}getCharacterLastIndex(e,t){return At(this.text,e,t)}transformSpan(e,{stripSpaces:t=!1,hasParentParens:s=!1}={}){if(!t)return Ce(e);let{outerSpan:i,innerSpan:n,hasParens:a}=Et(e,this.text,s),o=Ce(n);return a&&(o.extra={parenthesized:!0,parenStart:i.start,parenEnd:i.end}),o}createNode(e,{stripSpaces:t=!0,hasParentParens:s=!1}={}){let{type:i,start:n,end:a}=e,o={...e,...this.transformSpan({start:n,end:a},{stripSpaces:t,hasParentParens:s})};switch(i){case"NumericLiteral":case"StringLiteral":{let p=this.text.slice(o.start,o.end),{value:u}=o;o.extra={...o.extra,raw:p,rawValue:u};break}case"ObjectProperty":{let{shorthand:p}=o;p&&(o.extra={...o.extra,shorthand:p});break}}return o}},Pt=Ye;function Je(r){var e;return!!((e=r.extra)!=null&&e.parenthesized)}function k(r){return Je(r)?r.extra.parenStart:r.start}function N(r){return Je(r)?r.extra.parenEnd:r.end}function bt(r){return(r.type==="OptionalCallExpression"||r.type==="OptionalMemberExpression")&&!Je(r)}function Bt(r,e){let{start:t,end:s}=r.sourceSpan;return t>=s||/^\s+$/.test(e.slice(t,s))}var ke,Se,h,f,Oe,v,Ze,Ie=class extends Pt{constructor(t,s){super(s);P(this,h);P(this,ke);P(this,Se);Y(this,ke,t),Y(this,Se,s)}get node(){return c(this,h,v).call(this,O(this,ke))}transformNode(t){return c(this,h,Ze).call(this,t)}};ke=new WeakMap,Se=new WeakMap,h=new WeakSet,f=function(t,{stripSpaces:s=!0,hasParentParens:i=!1}={}){return this.createNode(t,{stripSpaces:s,hasParentParens:i})},Oe=function(t,s,{computed:i,optional:n,end:a=N(s),hasParentParens:o=!1}){if(Bt(t,O(this,Se))||t.sourceSpan.start===s.start)return s;let p=c(this,h,v).call(this,t),u=bt(p);return c(this,h,f).call(this,{type:n||u?"OptionalMemberExpression":"MemberExpression",object:p,property:s,computed:i,...n?{optional:!0}:u?{optional:!1}:void 0,start:k(p),end:a},{hasParentParens:o})},v=function(t,s=!1){return c(this,h,Ze).call(this,t,s)},Ze=function(t,s=!1){if(t instanceof oe){let{expressions:i}=t;if(i.length!==1)throw new Error("Unexpected 'Interpolation'");return c(this,h,v).call(this,i[0])}if(t instanceof F)return c(this,h,f).call(this,{type:"UnaryExpression",prefix:!0,argument:c(this,h,v).call(this,t.expr),operator:t.operator,...t.sourceSpan},{hasParentParens:s});if(t instanceof A){let{left:i,operation:n,right:a}=t,o=c(this,h,v).call(this,i),p=c(this,h,v).call(this,a),u=k(o),d=N(p),S={left:o,right:p,start:u,end:d};return n==="&&"||n==="||"||n==="??"?c(this,h,f).call(this,{...S,type:"LogicalExpression",operator:n},{hasParentParens:s}):c(this,h,f).call(this,{...S,type:"BinaryExpression",operator:n},{hasParentParens:s})}if(t instanceof ie){let{exp:i,name:n,args:a}=t,o=c(this,h,v).call(this,i),p=k(o),u=N(o),d=this.getCharacterIndex(/\S/,this.getCharacterIndex("|",u)+1),S=c(this,h,f).call(this,{type:"Identifier",name:n,start:d,end:d+n.length}),g=a.map(y=>c(this,h,v).call(this,y));return c(this,h,f).call(this,{type:"NGPipeExpression",left:o,right:S,arguments:g,start:p,end:N(g.length===0?S:Ke(!1,g,-1))},{hasParentParens:s})}if(t instanceof X)return c(this,h,f).call(this,{type:"NGChainedExpression",expressions:t.expressions.map(i=>c(this,h,v).call(this,i)),...t.sourceSpan},{hasParentParens:s});if(t instanceof ee){let{condition:i,trueExp:n,falseExp:a}=t,o=c(this,h,v).call(this,i),p=c(this,h,v).call(this,n),u=c(this,h,v).call(this,a);return c(this,h,f).call(this,{type:"ConditionalExpression",test:o,consequent:p,alternate:u,start:k(o),end:N(u)},{hasParentParens:s})}if(t instanceof $)return c(this,h,f).call(this,{type:"NGEmptyExpression",...t.sourceSpan},{hasParentParens:s});if(t instanceof B)return c(this,h,f).call(this,{type:"ThisExpression",...t.sourceSpan},{hasParentParens:s});if(t instanceof se||t instanceof U)return c(this,h,Oe).call(this,t.receiver,c(this,h,v).call(this,t.key),{computed:!0,optional:t instanceof U,end:t.sourceSpan.end,hasParentParens:s});if(t instanceof ne)return c(this,h,f).call(this,{type:"ArrayExpression",elements:t.expressions.map(i=>c(this,h,v).call(this,i)),...t.sourceSpan},{hasParentParens:s});if(t instanceof ae){let{keys:i,values:n}=t,a=n.map(p=>c(this,h,v).call(this,p)),o=i.map(({key:p,quoted:u},d)=>{let S=a[d],g=k(S),y=N(S),w=this.getCharacterIndex(/\S/,d===0?t.sourceSpan.start+1:this.getCharacterIndex(",",N(a[d-1]))+1),H=g===w?y:this.getCharacterLastIndex(/\S/,this.getCharacterLastIndex(":",g-1)-1)+1,j={start:w,end:H},K=u?c(this,h,f).call(this,{type:"StringLiteral",value:p,...j}):c(this,h,f).call(this,{type:"Identifier",name:p,...j}),Ne=K.end<K.start||w===g;return c(this,h,f).call(this,{type:"ObjectProperty",key:K,value:S,shorthand:Ne,computed:!1,start:k(K),end:y})});return c(this,h,f).call(this,{type:"ObjectExpression",properties:o,...t.sourceSpan},{hasParentParens:s})}if(t instanceof E){let{value:i}=t;switch(typeof i){case"boolean":return c(this,h,f).call(this,{type:"BooleanLiteral",value:i,...t.sourceSpan},{hasParentParens:s});case"number":return c(this,h,f).call(this,{type:"NumericLiteral",value:i,...t.sourceSpan},{hasParentParens:s});case"object":return c(this,h,f).call(this,{type:"NullLiteral",...t.sourceSpan},{hasParentParens:s});case"string":return c(this,h,f).call(this,{type:"StringLiteral",value:i,...t.sourceSpan},{hasParentParens:s});case"undefined":return c(this,h,f).call(this,{type:"Identifier",name:"undefined",...t.sourceSpan},{hasParentParens:s});default:throw new Error(`Unexpected LiteralPrimitive value type ${typeof i}`)}}if(t instanceof pe||t instanceof D){let i=t instanceof D,{receiver:n,args:a}=t,o=a.length===1?[c(this,h,v).call(this,a[0],!0)]:a.map(S=>c(this,h,v).call(this,S)),p=c(this,h,v).call(this,n),u=bt(p),d=i||u?"OptionalCallExpression":"CallExpression";return c(this,h,f).call(this,{type:d,callee:p,arguments:o,optional:d==="OptionalCallExpression"?i:void 0,start:k(p),end:t.sourceSpan.end},{hasParentParens:s})}if(t instanceof he){let i=c(this,h,v).call(this,t.expression);return c(this,h,f).call(this,{type:"TSNonNullExpression",expression:i,start:k(i),end:t.sourceSpan.end},{hasParentParens:s})}if(t instanceof ce){let i=c(this,h,v).call(this,t.expression);return c(this,h,f).call(this,{type:"UnaryExpression",prefix:!0,operator:"!",argument:i,start:t.sourceSpan.start,end:N(i)},{hasParentParens:s})}if(t instanceof M||t instanceof _){let{receiver:i,name:n}=t,a=this.getCharacterLastIndex(/\S/,t.sourceSpan.end-1)+1,o=c(this,h,f).call(this,{type:"Identifier",name:n,start:a-n.length,end:a},Bt(i,O(this,Se))?{hasParentParens:s}:{});return c(this,h,Oe).call(this,i,o,{computed:!1,optional:t instanceof _,hasParentParens:s})}if(t instanceof re){let i=c(this,h,v).call(this,t.key),n=c(this,h,v).call(this,t.value),a=c(this,h,Oe).call(this,t.receiver,i,{computed:!0,optional:!1,end:this.getCharacterIndex("]",N(i))+1});return c(this,h,f).call(this,{type:"AssignmentExpression",left:a,operator:"=",right:n,start:k(a),end:N(n)},{hasParentParens:s})}if(t instanceof te){let{receiver:i,name:n,value:a}=t,o=c(this,h,v).call(this,a),p=this.getCharacterLastIndex(/\S/,this.getCharacterLastIndex("=",k(o)-1)-1)+1,u=c(this,h,f).call(this,{type:"Identifier",name:n,start:p-n.length,end:p}),d=c(this,h,Oe).call(this,i,u,{computed:!1,optional:!1});return c(this,h,f).call(this,{type:"AssignmentExpression",left:d,operator:"=",right:o,start:k(d),end:N(o)},{hasParentParens:s})}throw Object.assign(new Error("Unexpected node"),{node:t})};function Tt(r,e){return new Ie(r,e).node}function Kt(r){return r instanceof ue}function Mt(r){return r instanceof G}var we,q,x,_t,C,et,tt,st,Ut,Ft,Dt,Gt,Xe=class extends Ie{constructor(t,s){super(void 0,s);P(this,x);P(this,we);P(this,q);Y(this,we,t),Y(this,q,s);for(let i of t)c(this,x,Ut).call(this,i)}get expressions(){return c(this,x,Dt).call(this)}};we=new WeakMap,q=new WeakMap,x=new WeakSet,_t=function(){return O(this,we)[0].key},C=function(t,{stripSpaces:s=!0}={}){return this.createNode(t,{stripSpaces:s})},et=function(t){return this.transformNode(t)},tt=function(t){return It(t.slice(O(this,x,_t).source.length))},st=function(t){let s=O(this,q);if(s[t.start]!=='"'&&s[t.start]!=="'")return;let i=s[t.start],n=!1;for(let a=t.start+1;a<s.length;a++)switch(s[a]){case i:if(!n){t.end=a+1;return}default:n=!1;break;case"\\":n=!n;break}},Ut=function(t){c(this,x,st).call(this,t.key.span),Mt(t)&&t.value&&c(this,x,st).call(this,t.value.span)},Ft=function(t){if(!t.value||t.value.source)return t.value;let s=this.getCharacterIndex(/\S/,t.sourceSpan.start);return{source:"$implicit",span:{start:s,end:s}}},Dt=function(){let t=O(this,we),[s]=t,i=O(this,q).slice(s.sourceSpan.start,s.sourceSpan.end).trim().length===0?t.slice(1):t,n=[],a=null;for(let[o,p]of i.entries()){if(a&&Kt(a)&&Mt(p)&&p.value&&p.value.source===a.key.source){let u=c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:p.key.source,...p.key.span}),d=(y,w)=>({...y,...this.transformSpan({start:y.start,end:w})}),S=y=>({...d(y,u.end),alias:u}),g=n.pop();if(g.type==="NGMicrosyntaxExpression")n.push(S(g));else if(g.type==="NGMicrosyntaxKeyedExpression"){let y=S(g.expression);n.push(d({...g,expression:y},y.end))}else throw new Error(`Unexpected type ${g.type}`)}else n.push(c(this,x,Gt).call(this,p,o));a=p}return c(this,x,C).call(this,{type:"NGMicrosyntax",body:n,...n.length===0?t[0].sourceSpan:{start:n[0].start,end:Ke(!1,n,-1).end}})},Gt=function(t,s){if(Kt(t)){let{key:i,value:n}=t;return n?s===0?c(this,x,C).call(this,{type:"NGMicrosyntaxExpression",expression:c(this,x,et).call(this,n.ast),alias:null,...n.sourceSpan}):c(this,x,C).call(this,{type:"NGMicrosyntaxKeyedExpression",key:c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:c(this,x,tt).call(this,i.source),...i.span}),expression:c(this,x,C).call(this,{type:"NGMicrosyntaxExpression",expression:c(this,x,et).call(this,n.ast),alias:null,...n.sourceSpan}),start:i.span.start,end:n.sourceSpan.end}):c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:c(this,x,tt).call(this,i.source),...i.span})}else{let{key:i,sourceSpan:n}=t;if(/^let\s$/.test(O(this,q).slice(n.start,n.start+4))){let{value:o}=t;return c(this,x,C).call(this,{type:"NGMicrosyntaxLet",key:c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:i.source,...i.span}),value:o?c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:o.source,...o.span}):null,start:n.start,end:o?o.span.end:i.span.end})}else{let o=c(this,x,Ft).call(this,t);return c(this,x,C).call(this,{type:"NGMicrosyntaxAs",key:c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:o.source,...o.span}),alias:c(this,x,C).call(this,{type:"NGMicrosyntaxKey",name:i.source,...i.span}),start:o.span.start,end:i.span.end})}}};function Wt(r,e){return new Xe(r,e).expressions}function Me({result:{ast:r},text:e,comments:t}){return Object.assign(Tt(r,e),{comments:t})}function Vt({result:{templateBindings:r},text:e}){return Wt(r,e)}var Qt=r=>Me(kt(r));var zt=r=>Me(Lt(r)),rt=r=>Me(Nt(r)),qt=r=>Vt(Rt(r));function it(r){var s,i,n;let e=((s=r.range)==null?void 0:s[0])??r.start,t=(n=((i=r.declaration)==null?void 0:i.decorators)??r.decorators)==null?void 0:n[0];return t?Math.min(it(t),e):e}function Ht(r){var e;return((e=r.range)==null?void 0:e[1])??r.end}function _e(r){return{astFormat:"estree",parse(e){let t=r(e);return{type:"NGRoot",node:r===rt&&t.type!=="NGChainedExpression"?{...t,type:"NGChainedExpression",expressions:[t]}:t}},locStart:it,locEnd:Ht}}var Zs=_e(rt),Js=_e(Qt),Xs=_e(zt),er=_e(qt);return es(tr);});